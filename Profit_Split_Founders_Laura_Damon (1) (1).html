
<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Interactive Profit Split — Founders (Yoni+Spence), Laura, Damon</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    :root { --bar-h: 28px; --gap: 10px; --font: 14px; }
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; margin: 24px; }
    h1 { font-size: 18px; margin: 0 0 10px; }
    .controls { display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: var(--gap); margin: 12px 0 20px; align-items: end; }
    .control { display: flex; flex-direction: column; }
    label { font-size: var(--font); margin-bottom: 6px; }
    input[type="number"], select { padding: 8px; font-size: var(--font); }
    .bars { display: grid; gap: 16px; }
    .bar-row { display: grid; grid-template-columns: 170px 1fr 160px; align-items: center; gap: 12px; }
    .bar-label { font-weight: 600; }
    .bar-track { height: var(--bar-h); background: #eee; border-radius: 6px; overflow: hidden; position: relative; }
    .bar-fill { height: 100%; }
    .founders { background: #cfead9; }
    .laura { background: #fde5b8; }
    .damon { background: #d8e3ff; }
    .bar-value { text-align: right; font-variant-numeric: tabular-nums; }
    .muted { color: #666; }
    .stacked { margin-top: 10px; }
    .stacked .bar-track { height: calc(var(--bar-h) + 6px); }
    .stacked .segment { height: 100%; display: inline-block; }
    .segment.founders { background: #cfead9; }
    .segment.laura { background: #fde5b8; }
    .segment.damon { background: #d8e3ff; }
    .inline { display: inline-flex; gap: 10px; align-items: center; }
    button { padding: 8px 12px; font-size: var(--font); cursor: pointer; }
    .weights { margin-top: 4px; font-size: 12px; }
  </style>
</head>
<body>
  <h1>Interactive Profit Split — Founders (Yoni+Spence), Laura, Damon</h1>
  <div class="muted">Based on capital‑days and a 20% carry on Laura & Damon profits (carry goes to Founders). Damon can be toggled as deployed or not.</div>
  <div class="controls">
    <div class="control">
      <label for="profitInput">Profit (P)</label>
      <input id="profitInput" type="number" step="1" min="0" value="4113">
    </div>
    <div class="control">
      <label for="carryInput">Carry on Laura & Damon (%)</label>
      <input id="carryInput" type="number" step="1" min="0" max="100" value="20">
    </div>
    <div class="control">
      <label for="scenario">Damon status</label>
      <select id="scenario">
        <option value="notdeployed" selected>Not deployed (0 weight)</option>
        <option value="deployed">Deployed on 2025‑08‑02 (5,000 capital)</option>
      </select>
      <div class="weights muted" id="weightsInfo"></div>
    </div>
    <div class="control">
      <label>&nbsp;</label>
      <div class="inline">
        <button id="recalcBtn">Recalculate</button>
        <button id="downloadBtn">Download CSV</button>
      </div>
    </div>
  </div>

  <div class="bars" id="bars"></div>

  <div class="stacked" style="margin-top:18px;">
    <div class="bar-row">
      <div class="bar-label">Stacked (Total Profit)</div>
      <div class="bar-track" id="stackTrack">
        <div class="segment founders" id="segFounders" style="width:0%"></div>
        <div class="segment laura" id="segLaura" style="width:0%"></div>
        <div class="segment damon" id="segDamon" style="width:0%"></div>
      </div>
      <div class="bar-value" id="stackLabel">$0.00</div>
    </div>
  </div>

  <div style="margin-top:18px;" class="muted">
    <div>Formulas (P = profit, c = carry as decimal):</div>
    <div>Founders = P*W<sub>F</sub> + c*P*(W<sub>L</sub> + W<sub>D</sub>)</div>
    <div>Laura = (1 − c)*P*W<sub>L</sub></div>
    <div>Damon = (1 − c)*P*W<sub>D</sub></div>
  </div>

  <script>
    // Fixed capital-day weights for two scenarios:
    // Scenario A: Damon not deployed → weights (Founders=340/515, Laura=175/515, Damon=0/515)
    // Scenario B: Damon deployed (Aug 2, 2025; 5,000) → weights (Founders=340/570, Laura=175/570, Damon=55/570)
    const WEIGHTS = {
      notdeployed: { F: 340/515, L: 175/515, D: 0/515 },
      deployed:    { F: 340/570, L: 175/570, D: 55/570 }
    };

    const parties = [
      { key: 'Founders (Yoni+Spence)', className: 'founders', id: 'Founders' },
      { key: 'Laura',  className: 'laura',  id: 'Laura' },
      { key: 'Damon',  className: 'damon',  id: 'Damon' }
    ];

    const profitInput = document.getElementById('profitInput');
    const carryInput = document.getElementById('carryInput');
    const scenarioSel = document.getElementById('scenario');
    const weightsInfo = document.getElementById('weightsInfo');
    const barsEl = document.getElementById('bars');

    function fmt(n) { return '$' + n.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ','); }
    function pct(n) { return (n*100).toFixed(2) + '%'; }

    function calcSplit(P, carryPct, scenario) {
      const c = (carryPct || 0)/100.0;
      const W = WEIGHTS[scenario];
      const founders = P*(W.F + c*(W.L + W.D));
      const laura    = P*((1 - c)*W.L);
      const damon    = P*((1 - c)*W.D);
      return { founders, laura, damon, W };
    }

    function render() {
      const P = Math.max(0, Number(profitInput.value || 0));
      const carryPct = Math.min(100, Math.max(0, Number(carryInput.value || 0)));
      const scenario = scenarioSel.value;
      const { founders, laura, damon, W } = calcSplit(P, carryPct, scenario);
      const total = founders + laura + damon;

      // Show current weights
      weightsInfo.textContent = `Weights → Founders: ${pct(W.F)}, Laura: ${pct(W.L)}, Damon: ${pct(W.D)} (sum ${( (W.F+W.L+W.D)*100 ).toFixed(2)}%)`;

      // Clear bars
      barsEl.innerHTML = '';

      const rows = [
        { label: 'Founders (Yoni+Spence)', value: founders, className: 'founders' },
        { label: 'Laura', value: laura, className: 'laura' },
        { label: 'Damon', value: damon, className: 'damon' }
      ];

      rows.forEach(r => {
        const row = document.createElement('div');
        row.className = 'bar-row';

        const label = document.createElement('div');
        label.className = 'bar-label';
        label.textContent = r.label;

        const track = document.createElement('div');
        track.className = 'bar-track';

        const fill = document.createElement('div');
        fill.className = 'bar-fill ' + r.className;
        const pctw = total > 0 ? (r.value / total) * 100 : 0;
        fill.style.width = pctw.toFixed(4) + '%';

        const value = document.createElement('div');
        value.className = 'bar-value';
        value.textContent = fmt(r.value);

        track.appendChild(fill);
        row.appendChild(label);
        row.appendChild(track);
        row.appendChild(value);
        barsEl.appendChild(row);
      });

      // Stacked
      const segF = document.getElementById('segFounders');
      const segL = document.getElementById('segLaura');
      const segD = document.getElementById('segDamon');
      const stackLabel = document.getElementById('stackLabel');

      const pF = total > 0 ? (founders / total) * 100 : 0;
      const pL = total > 0 ? (laura / total) * 100 : 0;
      const pD = total > 0 ? (damon / total) * 100 : 0;

      segF.style.width = pF.toFixed(4) + '%';
      segL.style.width = pL.toFixed(4) + '%';
      segD.style.width = pD.toFixed(4) + '%';
      stackLabel.textContent = fmt(total);
    }

    function toCsv() {
      const P = Math.max(0, Number(profitInput.value || 0));
      const carryPct = Math.min(100, Math.max(0, Number(carryInput.value || 0)));
      const scenario = scenarioSel.value;
      const { founders, laura, damon, W } = calcSplit(P, carryPct, scenario);

      const rows = [
        ['Party','Amount','Profit','Carry_%','Scenario','W_Founders','W_Laura','W_Damon'],
        ['Founders (Yoni+Spence)', founders.toFixed(2), P.toFixed(2), carryPct, scenario, (W.F*100).toFixed(4)+'%', (W.L*100).toFixed(4)+'%', (W.D*100).toFixed(4)+'%'],
        ['Laura', laura.toFixed(2), P.toFixed(2), carryPct, scenario, '', '', ''],
        ['Damon', damon.toFixed(2), P.toFixed(2), carryPct, scenario, '', '', '']
      ];
      const csv = rows.map(r => r.join(',')).join('\n');
      const blob = new Blob([csv], {type: 'text/csv'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = 'profit_split_founders_laura_damon.csv';
      document.body.appendChild(a);
      a.click();
      setTimeout(() => {
        document.body.removeChild(a);
        URL.revokeObjectURL(url);
      }, 1000);
    }

    document.getElementById('recalcBtn').addEventListener('click', render);
    document.getElementById('downloadBtn').addEventListener('click', toCsv);
    profitInput.addEventListener('input', render);
    carryInput.addEventListener('input', render);
    scenarioSel.addEventListener('change', render);

    render();
  </script>
</body>
</html>
